# Бекман Андрей 253505, E-commerce platform
Субд: PostreSql
## Функциональные требования
- Аутентификация\авторизация с ипользованием access\refresh токенов
- Система ролей: покупатель, продавец, администратор
- CRUD операции для всех сущностей БД
- Возможность просмотра и поиска товаров с помощью категорий
- Просмотр корзины\истории покупок
- Статистика продаж для продавца
- Интеграция платежной системы
## Схема сущностей базы данных
![asas](https://github.com/user-attachments/assets/ec5b32ad-e9b6-49bc-b3e2-bc3b26570be0)

## 1. Таблица **`Users`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`Email`**: VarChar Unique notnull - Адрес электронной почты
- **`Phone`**: VarChar Unique notnull - Номер телефона
- **`PasswordHash`**: bytea NotNull - хеш пароля
- **`FirstName`**: VarChar - Имя пользователя
- **`LastName`**: VarChar - Фамилия пользователя
## 2. Таблица **`Customers`** 
- **`Id`**: uuid Primary key - Уникальный 
- **`StripeId`**: VarChar - Уникальный идентефикатор в платежной системе
- **`UserId`**:  Foreign key - Внешний ключ соответствующий сущности пользователя
## 3. Таблица **`Admins`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`IsSuper`**: bool - Флаг указывающий на привелегированные возможности администратора
- **`UserId`**:  Foreign key - Внешний ключ соответствующий сущности пользователя
## 4. Таблица **`Sellers`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`ShopName`**:  VarChar - Имя продавца, показываемое покупателю
- **`UserId`**:  Foreign key - Внешний ключ соответствующий сущности пользователя
## 5. Таблица **`RefreshTokens`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`Token`**: text - Значение токена
- **`ExpiresAt`**: timestamp - Время до которого токен валиден
- **`UserId`**:  Foreign key - Внешний ключ соответствующий сущности пользователя
## 6. Таблица **`Products`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`Name`**: VarChar - Наименование продукта
- **`Description`**: Text - Описание продукта
- **`Price`**: integer - Цена продукта
- **`Quantity`**: integer - Количество оставшихся экземпляров у продавца
- **`SellerId`**: uuid Foreign key - Внешний ключ, соответствующий сущности продавца товара
## 7. Таблица **`Categories`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`Name`**: uuid Primary key - Уникальный идентефикатор
- **`ParentCategoryId`**: uuid Foreign key - Внешний ключ, соответствующий сущности родительской категории
## 8. Таблица **`ProductMedias`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`ProductId`**: uuid Foreign key - Внешний ключ, соответствующий сущности продукта
- **`BlobId`**: VarChar - Строка идентефицирующая изображение в облачном хранилище
## 9. Таблица **`CartItems`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`Quantity`**: integer - Количество добавленных в корзину товаров
- **`ProductId`**: uuid Foreign key - Внешний ключ, указывающий на ссущность продукта
- **`CustomerId`**: uuid Foreign key - Внешний ключ, указывающий на сущность покупателя, добавившего продукт в корзину
## 10. Таблица **`Orders`** 
- **`Id`**: uuid Primary key - Уникальный идентефикатор
- **`CartItemId`**: uuid Foreign key - Внешний ключ, казывающий на сущность добавленного в корзину товара
- **`Status`**: Enum - Статус заказа в виде перечисления
- **`OpenAt`**: timestamp - Время оформления заказа
